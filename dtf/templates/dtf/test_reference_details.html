{% extends 'dtf/base.html' %}

{% load dtf.custom_filters %}
{% block body %}

<div class="bg-white sticky-top pt-3 pb-1">

<nav>
  <ol class="breadcrumb">
    <li class="breadcrumb-item" aria-current="page">
        <a href="{% url 'projects' %}">Project List</a>
    </li>
    <li class="breadcrumb-item" aria-current="page">
        <a href="{% url 'project_details' test_reference.reference_set.project.slug %}">{{ test_reference.reference_set.project.name }}</a>
    </li>
    <li class="breadcrumb-item" aria-current="page">
        <a href="{% url 'project_reference_sets' test_reference.reference_set.project.slug %}">Reference Sets</a>
    </li>
    <li class="breadcrumb-item" aria-current="page">
        <a href="{% url 'reference_set_details' test_reference.reference_set.project.slug test_reference.reference_set.pk %}">
        {{test_reference.reference_set.id}}
        </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">
        {{ test_reference.test_name }}
    </li>
  </ol>
</nav>

</div>

<table class="table table-striped table-hover table-sm tablesorter">
    <thead>
    <tr>
        <th class="noselect">
            Name
        </th>
        <th class="noselect">
            Value
        </th>
    </tr>
    </thead>
    <tbody>
    {% for name, entry in test_reference.references.items %}
        <tr>
            <td>
                {{ name }}
            </td>
            <td>
                {% if entry.value %}
                    {% if entry.source %}
                        <a class="ref_link" target="_blank" href="{% url 'test_result_details' test_reference.reference_set.project.slug entry.source %}">{{ entry.value.data|create_html_representation:entry.value.type }}</a>
                    {% else %}
                        {{ entry.value.data|create_html_representation:entry.value.type }}
                    {% endif %}
                {% else %}
                    {% if entry.source %}
                        <a class="ref_link" target="_blank" href="{% url 'test_result_details' test_reference.reference_set.project.slug entry.source %}">N/A</a>
                    {% else %}
                        N/A
                    {% endif %}
                {% endif %}
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}